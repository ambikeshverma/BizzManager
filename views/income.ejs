<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

       <!-- Site Tab Icon (Favicon) -->
<link rel="icon" type="image/x-icon" href="/favicon.ico" />

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json" />

<!-- Theme Color for Address Bar (Mobile) -->
<meta name="theme-color" content="#ddeefc" />

<!-- Apple-specific (optional) -->
<link rel="apple-touch-icon" href="/icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">


    <title>Income</title>
    <link rel="stylesheet" href="/style/income.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav>
      <div class="hamburger" id="hamburger">&#9776;</div>
      <div class="logo">
        <img src="/images/logo.jpg" height="50px" alt="" />
        <span>BizManager</span>
      </div>
      <div class="heading">Income Management</div>
      <div class="bell">
        <img src="/images/Notification.png" alt="" />
        <span><%=user.name%></span>
        <span>(<%=user.role%>)</span>
      </div>
    </nav>
    <main>
      <div class="sidebar">
        <div>
          <a href="/dashboard" class="sidebar-item">
            <img src="/images/Dasboard.png" height="30px" alt="" />
            <span>Dashboard</span>
          </a>
        </div>
        <div>
          <a href="/inventory" class="sidebar-item">
            <img src="/images/Inventory.png" height="30px" alt="" />
            <span>Inventory</span>
          </a>
        </div>
        <div>
          <a href="/expenditure" class="sidebar-item">
            <img src="/images/Expen.png" height="30px" alt="" />
            <span>Expenditure</span>
          </a>
        </div>
        <div>
          <a href="/income" class="sidebar-item">
            <img src="/images/Instal.png" height="30px" alt="" />
            <span>Income</span>
          </a>
        </div>
        <div>
          <a href="/labour" class="sidebar-item">
            <img src="/images/Labour.png" height="30px" alt="" />
            <span>Labour & Wages</span>
          </a>
        </div>
        <div class="sidebar-item2">
          <div class="account">ACCOUNT</div>
          <div>
            <a href="" class="sidebar-item">
              <img src="/images/settings.png" height="30px" alt="" />
              <span>Settings</span>
            </a>
          </div>
          <div>
            <a href="/logout" class="sidebar-item">
              <img src="/images/logout.png" height="30px" alt="" />
              <span>Sign out</span>
            </a>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="heading1">
          <div class="formobile">
          <div class="h1">Income Management</div>
          <div class="overview">Track and manage your business income</div>
          </div>
          <div class="buttonMobile">
            <button class="add-product" id="addProduct">
              <span>+</span>
              <span>Add Income</span>
            </button>
          </div>
        </div>
        <div class="modal-overlay" id="modalOverlay1">
          <div class="modal">
            <div class="form-heading">
              <img src="/images/receipt.png" height="30px" alt="" />
              <h2>Add Income</h2>
            </div>

            <form action="/add-income" method="post" id="addProductForm">
              <label for="amount">Amount*</label>
              <input
                name="amount"
                type="number"
                class="input"
                id="amount"
                placeholder="Enter amount"
                required
              />
              <label for="date">Date*</label>
              <input
                type="datetime-local"
                name="lastUpdate"
                class="input"
                id="date"
                required
              />
              <label for="categoryInput">Payment Type*</label>
              <select name="paymentType" class="input" id="categoryInput" required>
                <option value="">-- select --</option>
                <option value="Account Pay">Account pay</option>
                <option value="Through Cash">Through Cash</option>
                <option value="Other">Other</option>
              </select>
             
              <label for="reamrk">Remark*</label>
              <input
                type="text"
                name="remark"
                id="remark"
                class="input"
              />
              <div class="form-buttons">
                <button
                  type="button"
                  class="form-cancel-button"
                  id="cancelButton-product"
                >
                  Cancel
                </button>
                <button type="submit" id="sub" class="form-submit-button">
                  Add Income
                </button>
              </div>
            </form>
          </div>
        </div>


        <div style="height: 675px; margin-top: 40px; overflow: hidden">
          <form class="filterform" method="GET" action="/expenditure">
            <label>Start Date:</label>
            <input class="dateF" type="date" name="start" value="<%= startDate %>" />
            <label>End Date:</label>
            <input class="dateF" type="date" name="end" value="<%= endDate %>" />
            <button class="filterbt" type="submit">Filter</button>
          </form>

          <div class="table-container">
            <table class="table-content">
              <thead>
                <tr>
                  <th>SR No.</th>
                  <th>DATE</th>
                  <th>AMOUNT</th>
                  <th>REMARK</th>
                  <th>PAYMENT TYPE</th>
                  <th>ACTION</th>
                </tr>
              </thead>
              <tbody>
                <% incomes.forEach((income,index) =>{%>
                <tr>
                  <td><%=index+1%>.</td>
                  <td><%=income.lastUpdate%></td>
                  <td><%=income.amount%></td>
                  <td><%=income.remark%></td>
                  <td><%=income.paymentType%></td>
                  <td>
                    <form
                      action="/deleteincome/<%=income._id%>"
                      method="post"
                      onsubmit="return confirm('Are you sure! You want to delete <%=income.amount%>?');"
                    >
                      <button type="submit" class="delete-row">
                        <img src="/images/delete.png" alt="Delete" />
                      </button>
                    </form>
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>


          <div style="margin-top: 20px">
          <% if (currentPage > 1) { %>
          <a
            href="/expenditure?page=<%= currentPage - 1 %>&start=<%= startDate %>&end=<%= endDate %>"
            >⬅️ Previous</a
          >
          <% } %>

          <span style="margin: 0 10px"
            >Page <%= currentPage %> of <%= totalPages %></span
          >

          <% if (currentPage < totalPages) { %>
          <a
            href="/expenditure?page=<%= currentPage + 1 %>&start=<%= startDate %>&end=<%= endDate %>"
            >Next ➡️</a
          >
          <% } %>


        </div>




        





        </div>
      </div>
    </main>
    <script src="/javascript/income.js"></script>
  </body>
</html>
